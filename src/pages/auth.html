<!-- auth.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Us - Oryx</title>
    <link rel="icon" type="image/png" href="../../public/assets/images/oryx-logo.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/style.css">
</head>
<body>

<main class="animate-fade min-vh-100 d-flex align-items-center" style="padding-top: 80px;">
    <div class="container animate-fade">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="row bg-secondary rounded-4 overflow-hidden shadow-lg" id="auth-form-container">
                    <div class="card col-lg-6 p-5">
                        <div class="text-center mb-4">
                            <div class="text-center mb-4">
                                <img src="../../public/assets/images/oryx-logo.png" alt="Oryx" width="80" height="80" class="mb-3">
                                <h2 class="text-cyan">Welcome Back</h2>
                                <p class="text-muted">Sign in to continue your learning journey</p>
                            </div>
                            <div id="message-container">
                                <div id="error-message" class="alert alert-danger d-none" role="alert"></div>
                                <div id="success-message" class="alert alert-success d-none" role="alert"></div>
                            </div>
                            <div class="border-bottom mb-4 ">
                                <ul class="d-flex nav gap-5 justify-content-between py-2 px-5">
                                    <li class="nav-item">
                                        <button class="btn btn-secondary btn-sm active" id="signin-tab" data-bs-toggle="pill" data-bs-target="#signin" type="button" role="tab">
                                            Sign In
                                        </button>
                                    </li>
                                    <li class="nav-item">
                                        <button class="btn btn-secondary btn-sm" id="signup-tab" data-bs-toggle="pill" data-bs-target="#signup" type="button" role="tab">
                                            Sign Up
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-content" id="authTabContent">
                                <div class="tab-pane animate-fade show active" id="signin" role="tabpanel">
                                    <form id="signinForm">
                                        <div class="mb-3">
                                            <div class="input-group">
                                                <span class="input-group-text bg-secondary border-dark text-muted"><i class="fas fa-envelope"></i></span>
                                                <input type="email" class="form-control" id="signinEmail" placeholder="Enter your Email" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="input-group">
                                                <span class="input-group-text bg-secondary border-dark text-muted"><i class="fas fa-lock"></i></span>
                                                <input type="password" class="form-control" id="signinPassword" placeholder="Enter your Password" required>
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('signinPassword', 'signinPasswordIcon')">
                                                    <i class="bi bi-eye" id="signinPasswordIcon"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="rememberMe">
                                                <label class="text-muted" for="rememberMe">Remember me</label>
                                            </div>
                                            <a href="#" class="text-primary text-decoration-none small">Forgot password?</a>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100 mb-4">Sign In</button>
                                    </form>
                                </div>
                                <div class="tab-pane animate-fade" id="signup" role="tabpanel">
                                    <form id="signupForm">
                                        <div class="mb-3">
                                            <div class="input-group">
                                                <span class="input-group-text bg-secondary border-dark text-muted"><i class="fas fa-user"></i></span>
                                                <input type="text" class="form-control" id="signupName" placeholder="Enter your Full Name" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="input-group">
                                                <span class="input-group-text bg-secondary border-dark text-muted"><i class="fas fa-envelope"></i></span>
                                                <input type="email" class="form-control" id="signupEmail" placeholder="Enter your Email" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="input-group">
                                                <span class="input-group-text bg-secondary border-dark text-muted"><i class="fas fa-lock"></i></span>
                                                <input type="password" class="form-control" id="signupPassword" placeholder="Enter your Password" required>
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('signupPassword', 'signupPasswordIcon')">
                                                    <i class="bi bi-eye" id="signupPasswordIcon"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <div class="input-group">
                                                <span class="input-group-text bg-secondary border-dark text-muted"><i class="fas fa-lock"></i></span>
                                                <input type="password" class="form-control" id="ConfirmPassword" placeholder="Verify your Password" required>
                                                <button class="btn btn-outline-secondary" type="button" onclick="togglePassword('ConfirmPassword', 'confirmPasswordIcon')">
                                                    <i class="bi bi-eye" id="confirmPasswordIcon"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mb-3 form-check">
                                            <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                                            <label class="text-muted" for="agreeTerms">
                                                I agree to the <a href="#" class="text-primary">Terms of Service</a> and <a href="#" class="text-primary">Privacy Policy</a>
                                            </label>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100 mb-4">Create Account</button>
                                    </form>
                                </div>
                                <div class="text-center mb-4">
                                    <p class="text-muted small mb-3">Or continue with</p>
                                    <div class="container gap-2">
                                        <button class="btn btn-outline-primary my-2 me-2" onclick="socialLogin('Google')">
                                            <i class="bi bi-google me-2"></i>
                                        </button>
                                        <button class="btn btn-outline-primary my-2 me-2" onclick="socialLogin('Github')">
                                            <i class="bi bi-github me-2"></i>
                                        </button>
                                        <button class="btn btn-outline-primary my-2 me-2" onclick="socialLogin('Linkedin')">
                                            <i class="bi bi-linkedin me-2"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <p class="text-muted small mb-2">For demo purposes:</p>
                                    <button class="btn btn-secondary btn-sm" onclick="demoLogin()">
                                        Use Demo Account
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 p-5 text-center">
                        <div class="h-100 d-flex flex-column justify-content-center">
                            <div class="mb-4">
                                <div class="display-1">👋</div>
                            </div>
                            <h3 class="mb-3">Welcome to Oryx!</h3>
                            <p class="text-secondary mb-4">
                                Join our community of learners and mentors. Start building the skills that matter for your career.
                            </p>
                            <div class="row g-3 text-start">
                                <div class="col-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-circle text-cyan me-2 small"></i>
                                        <span class="small">Skill Exchange</span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-circle text-cyan me-2 small"></i>
                                        <span class="small">Career Guidance</span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-circle me-2 small" style="color: #10b981;"></i>
                                        <span class="small">AI-Powered Tools</span>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-circle text-cyan me-2 small"></i>
                                        <span class="small">Expert Mentorship</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center p-5 bg-light rounded-4 shadow-lg d-none" id="logged-in-view">
                    <h2 class="text-cyan">You are already logged in</h2>
                    <p class="text-muted" id="logged-in-email"></p>
                    <div class="mt-4">
                        <a href="../index.html" class="btn btn-primary">Go to Home Page</a>
                        <button id="logout-button" class="btn btn-danger">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="../scripts/main.js"></script>

<script>
    function togglePassword(fieldId, iconId) {
        const passwordField = document.getElementById(fieldId);
        const passwordIcon = document.getElementById(iconId);
        if (passwordField.type === "password") {
            passwordField.type = "text";
            passwordIcon.classList.remove("bi-eye");
            passwordIcon.classList.add("bi-eye-slash");
        } else {
            passwordField.type = "password";
            passwordIcon.classList.remove("bi-eye-slash");
            passwordIcon.classList.add("bi-eye");
        }
    }

    function socialLogin(provider) {
        showMessage(Login with ${provider} is not implemented.);
    }

    function demoLogin() {
        document.getElementById('signinEmail').value = 'demo@example.com';
        document.getElementById('signinPassword').value = 'password123';
    }

    document.addEventListener('DOMContentLoaded', () => {
        const signinForm = document.getElementById('signinForm');
        const signupForm = document.getElementById('signupForm');
        const errorMessage = document.getElementById('error-message');
        const successMessage = document.getElementById('success-message');
        const authFormContainer = document.getElementById('auth-form-container');
        const loggedInView = document.getElementById('logged-in-view');
        const loggedInEmailEl = document.getElementById('logged-in-email');
        const logoutButton = document.getElementById('logout-button');

        const USERS_KEY = 'oryx_users';
        const LOGGED_IN_USER_KEY = 'oryx_logged_in_user';

        const showMessage = (message, type = 'danger') => {
            const element = type === 'success' ? successMessage : errorMessage;
            const otherElement = type === 'success' ? errorMessage : successMessage;

            element.textContent = message;
            element.classList.remove('d-none');
            otherElement.classList.add('d-none');

            setTimeout(() => {
                element.classList.add('d-none');
            }, 4000);
        };

        const loggedInUserEmail = localStorage.getItem(LOGGED_IN_USER_KEY);
        if (loggedInUserEmail) {
            authFormContainer.classList.add('d-none');
            loggedInView.classList.remove('d-none');
            loggedInEmailEl.textContent = Logged in as: ${loggedInUserEmail};
        }

        logoutButton.addEventListener('click', () => {
            localStorage.removeItem(LOGGED_IN_USER_KEY);
            window.location.reload();
        });

        signupForm.addEventListener('submit', (event) => {
            event.preventDefault();

            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('ConfirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;

            if (!name || !email || !password) {
                showMessage('Please fill in all required fields.');
                return;
            }
            if (password !== confirmPassword) {
                showMessage('Passwords do not match.');
                return;
            }
            if (!agreeTerms) {
                showMessage('You must agree to the terms to create an account.');
                return;
            }

            const users = JSON.parse(localStorage.getItem(USERS_KEY)) || [];
            if (users.some(user => user.email === email)) {
                showMessage('An account with this email already exists.');
                return;
            }

            users.push({ name, email, password });
            localStorage.setItem(USERS_KEY, JSON.stringify(users));

            showMessage('Signup successful! Please sign in.', 'success');
            signupForm.reset();

            const signinTabTrigger = document.getElementById('signin-tab');
            const tab = new bootstrap.Tab(signinTabTrigger);
            tab.show();
        });

        signinForm.addEventListener('submit', (event) => {
            event.preventDefault();

            const email = document.getElementById('signinEmail').value.trim();
            const password = document.getElementById('signinPassword').value;

            if (!email || !password) {
                showMessage('Please enter your email and password.');
                return;
            }

            const users = JSON.parse(localStorage.getItem(USERS_KEY)) || [];
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                localStorage.setItem(LOGGED_IN_USER_KEY, user.email);
                window.location.href = '../index.html';
            } else {
                showMessage('Invalid email or password. Please try again.');
            }
        });
    });
</script>
</body>
</html>